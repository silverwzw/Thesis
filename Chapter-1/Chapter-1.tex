\chapter{Introduction}
\label{chap:intro}

    Since the first use of the term "NoSQL" by Carlo Strozzi in 1988, the "NoSQL" database is attracting the attention of developers. Unlike traditional databases, NoSQL database is now used for storage and retrieval of data which is modeled differently from the tabular relations. It brings innovation and new ideas to the community, industry and academia. They have become alternatives for classic relational database. Commercial companies like Google and Amazon are using them in production environments for at least 8 years (CITE HERE). Compared to relational database, they have advantages in performance, scalability and flexibility whereas low functionality is their disadvantage. The NoSQL database brings new tools and new ideas to the community and provides an alternative to relational databases. It is a good idea to try NoSQL databases and use their unique features in different applications such as distributed file system.

    Nowadays more and more data are stored online. Individuals are uploading their personal data to web services like DropBox and YouTube and commercial companies are using systems like Amazon S3 to store their data remotely. There are a large number of reasons to store data in the cloud. It makes sharing and collaboration easier and ensures that the data can be accessed by its owner anywhere and anytime. In those web services, distributed file system like GFS and HDFS are used to process large amount of data on different machines. The distributed file system can also combine storage on different machine into a logically unified volume and at the same time can provide functionalities like redundancy and load balancing. Popular distributed file system adopted by industry and academic institutes include NFS and HDFS. NFS provides the functionality of file sharing and HDFS focuses on MapReduce tasks, etc.

    A snapshot is a state of a system at a particular point in time. It is becoming popular in modern file system to have the capability to take snapshots. Classic FAT file systems do not support snapshot but their successor NTFS comes with snapshot capability. The original ext file system does not have snapshot. But Ext2 can obtain snapshot capability with the help of SnapFS and Ext3 has a snapshot version named ext3cow. The latest Ext4 now has a built-in snapshot capability. The recent file system ZFS on Solaris and the experimental file system BTRFS also come with snapshot feature. One of the reasons for this popularity can be the decreasing cost of storage, which makes snapshotting cost effective. A snapshot file system can be used to test installations, keep track of modifications, provide a rollback mechanism, and make the backup process more efficient.

    Snapshot can be either read-only or writable. Writable snapshots are also called clones. They are supported by several advanced file system like ZFS and BTRFS. The Ext4 file system also has a development branch for writable snapshot. From the userâ€™s point of view, a read-only snapshot is an immutable copy of the file system at a specific time, whereas a writable snapshot is a fork of the file system at a particular time spot. With the help of writable snapshot, a system can provide similar environment to different users while preserving their configurations and installations. It can also provide file system isolation for process, software or virtual machine.

    Copy-on-write is a strategy widely used in computer science. A program that uses copy-on-write strategy accesses data though a pointer or a reference. When a copy operation is requested, instead of making a copy of actual data, a program that uses copy-on-write stratergy will simply return a new reference to the original data. Only when a modification to one of the ``copies'' is requested, the program will then make a actual copy of the original data and then apply the modification to that copy. At the end, the program will point corresponding pointer or reference to the updated copy. This design not only elimiates unnecessary overhead in data copy but also ensures consistency, integrity and an easy support of transaction. In addition to those benefits, file system using copy-on-write strategy will be able to take snapshots with low performance cost. Without copy-on-write strategy, snapshots either write in-place which is more expensive, or requires special architecture in storage system like the Split-Mirror architecture.

    MongoDB has become one of the most popular NoSQL database. It has a large and active developer community. A recent \$150 million investment ensures the long term support and reflects the confidence of investors.(CITE HERE)\cite{rsync_alg}  MongoDB is an open source document-oriented database suitable for agile development. It focuses on scalability, performance and availability.

    The Filesystem in UserSpace (FUSE) is an operating system mechanism for Unix-like computer operating systems that lets non-privileged users create their own file systems without editing kernel code. FUSE routes the file system call from VFS in kernel space back to the user space and then lets the user program to process the file system call. It makes developing and debugging a file system much easier. Because the filesystem will be running in user space, there is no need to recompile or debug the kernel and developers will no longer have to worry whether their code will introduce bugs into the kernel. FUSE is a widely used component of Linux file system. A number of projects are using fuse like the overlayFS, ntfs-3g and vmware tools. Inspired by FUSE, there are some other userspace filesystem like Dokan under windows.

\section{Thesis Statement}
   - 

\section{Contribution}

    In this thesis, we propose a design of a new distributed file system with snapshot capability. We implement by using Java, MongoDB, FUSE, and other techniques. We also propose some new ways to improve the effiency of a snapshot system. We teste the snapshot system using different variables, compare and explain the outcome of the test.
